> 브라우저는 웹 서비스의 모든 것이다.
> 웹 서비스를 개발하면서 사용하는 것의 모든 도구가 브라우저가 동작하는 방식과 관련 있다.

> 브라우저는 다양한 층위의 구성요소가 얽혀 있다. 브라우저의 한 종류인 크롬은 HTML과 CSS를 해석하는 렌더링 엔진, 자바스크립트 코드를 실행 엔진, 네트워크 요청을 처리하는 엔진 등으로 구성된 복잡한 소프트웨어이다. 이 모든 구성요소가 협력하여 사용자가 웹 페이지를 보고 상호작용할 수 있도록 한다.

### 1. 브라우저의 기본적인 아키텍처

브라우저를 구성하는 주요 프로세스의 관계

![[Pasted image 20251121224555.png]]

#### 사용자 인터페이스

> 사용자 인테피으스는 브라우저의 상단 바 영역에 해당하는 부분을 의미한다. 웹 페이지가 렌더링되는 화면 영역을 제외하고 사용자가 브라우저의 동작을 제어하는 부분이다.

#### 브라우저 엔진

> 브라우저 엔진은 브라우저 내의 서로 다른 요소들, 즉 여러 인터페이스 사이에서 중요한 연결 고리의 역할을 한다. 브라우저 엔진은 사용자 인터페이스와 렌더링 엔진 사이의 상호작용을 조정한다. 예를 들어, 사용자가 뒤로 가기 버튼을 클릭하면 브라우저 엔진이 이를 감지하고 렌더링 엔진에 이전 페이지를 로드하도록 지시한다.
> 
> 또한 웹 페이지 내의 자바스크립트 코드를 해석하고 실행하도록 자바스크립트 엔진과도 통신하며 로컬 스트로지, 쿠키 등의 데이터를 관리하는 인터페이스 와 상호 작용하며 필요한 데이터를 저장하고 불러온다.
> 
> 브라우저 엔진은 다양한 구성 요소 사이에서 원할한 상호 작용과 통신을 가능하게 하는데 필수적이다.

#### 렌더링 엔진

> 렌더링 엔진은 브라우저 엔진이 여러 인터페이스와 상호 작용하여 받아온 웹 페이지를 사용자가 보는 화면에 시각적으로 표한하는 역할을 한다. 웹 서버에서 전송받은 HTML, XML, CSS 등의 마크업 언어 스타일시트를 해석하고 처리하며, 그 결과를 사용자의 화면에 픽셀 그래픽 형태로 렌더링한다. 렌더링 과정은 문서의 구조와 스타일 정보를 결합하여 사용자가 시각적으로 이해하고 상호 작용하는 형태로 표현하는 과정을 포함한다.

#### 네트워크 엔진

> 네트워크 엔진은 브라우저가 수행하는 모든 네트워크 요청을 처리하는 역할을 한다. 일반적으로 브라우저가 웹 페이지 하나를 사용자에게 표현하기 위해서는 HTML 문서뿐만 아니라 CSS 파일, 자바스크립트 파일, 이미지 파일 등 다양한 리소스를 서버로부터 요청하고 받아와야 한다. 네트워크 엔진은 이러한 요청을 관리하고, 서버와의 통신을 담당한다. HTTP/HTTPS 프로토콜을 사용하여 서버에 요청을 보내고 응답을 받아오는 과정을 처리하며, 이를 통해 브라우저가 필요한 모든 리소스를 확보할 수 있도록 한다.

#### 자바스크립트 엔진

> 자바스크립트 엔진은 자바스크립트 코드를 해석하고 실행하는 역할을 수행한다. 브라우저 런타임에서 자바스크립트는 문서 객체 모델(DOM) 이나 스타일 객체 모델 (CSSOM)을 직접 조작하는데, 이는 실제로 사용자에게 보일 화면에 어떤 요소들이 그려질지를 조작한다는 의미이다. 따라서 자바스크립트 실행하기는 스크립트를 실행한 결과를 바탕으로 렌더링 엔진과 상호 작용하는 역할도 수행한다.
> 
> 널리 알려진 자바스크립트 실행기로는 크롬의 V8, 파이어폭스의 스파이더몽키, 사파리의 자바스크립트코어 등이 있다. 이러한 엔진들은 자바스크립트 코드를 빠르게 실행하기 위해 다양한 최적화 기법을 적용하고 있다.

#### UI 백엔드

> UI 백엔드는 브라우저가 운영체제의 기본 UI 요소를 그릴 수 있도록 지원하는 역할을 한다. 예를 들어, 브라우저의 창, 버튼, 메뉴 등과 같은 기본적인 UI 구성 요소들은 운영체제에서 제공하는 네이티브 UI 컴포넌트를 사용하여 렌더링된다. UI 백엔드는 이러한 네이티브 컴포넌트와 상호 작용하여 브라우저가 운영체제의 UI 스타일과 일관성을 유지할 수 있도록 돕는다.
> 
> UI 백엔드는 운영 체제에서 제공하는 UI메서드를 사용하여 플랫폼에 독립적으로 UI요소들을 표시한다.

#### 데이터 영속성

> 데이터 영속성은 브라우저에서 쿠키 등 여러 형태의 데이터 저장 메커니즘을 지원한다.
> 쿠키 외에도 로컬 스토리지, 세션 스토리지, 인덱스드DB, 캐시 등 다양한 저장소를 제공하여 웹 애플리케이션이 사용자 데이터를 로컬에 저장하고 관리할 수 있도록 한다. 이러한 데이터 저장 메커니즘은 사용자가 웹 페이지를 다시 방문할 때 이전 상태를 복원하거나, 사용자 설정을 유지하는 데 유용하다.

- 로컬스토리지: 브라우저에 데이터를 영구적으로 저장하는 메커니즘으로, 도메인 당 최대 5MB까지 저장할 수 있다. 페이지를 닫아도 데이터가 유지된다.
- 세션스토리지: 세션 단위로 데이터를 저장하는 메커니즘으로, 페이지를 닫으면 데이터가 삭제된다. 도메인 당 최대 5MB까지 저장할 수 있다.
- 인덱스드DB: 대용량 구조화된 데이터를 저장할 수 있는 비관계형 데이터베이스로, 트랜잭션과 인덱싱을 지원한다.
- 캐시: 네트워크 요청의 응답 데이터를 저장하여, 동일한 요청이 발생할 때 네트워크를 통해 다시 가져오는 대신 캐시된 데이터를 사용하여 성능을 향상시킨다.
- 쿠키: 서버와 클라이언트 간에 작은 데이터를 주고받기 위한 메커니즘으로, 주로 세션 관리, 사용자 인증, 개인화 설정 등에 사용된다. 각 쿠키는 도메인 별로 저장되며, 일반적으로 크기는 4KB로 제한된다.
---

### 2. 웹의 호환성 문제를 해결하는 방법

> 모든 브라우저가 표준과 기술의 발전 속도를 따라가지는 않는다. 따라서 웹 개발자는 다양한 브라우저에서 일관된 사용자 경험을 제공하기 위해 호환성 문제를 해결해야 한다. 다음은 웹의 호환성 문제를 해결하는 몇 가지 방법이다.

> 폴리필은 웹 서비스 개발에서 브라우저 간의 미세한 구현 차이나 미지원 기능을 보완하고자 사용하는 코드 조각이다. 즉 새로운 웹 표준 기능이나 API를 아직 구현하지 않은 브라우저에서도 동일한 기능을 사용할 수 있도록 구현한다.

> 폴리필을 사용하면 개발자는 최신 웹 기술을 활용하면서도 다양한 브라우저에서 일관된 사용자 경험을 제공할 수 있다. 예를 들어, ES6의 Promise 객체를 지원하지 않는 구형 브라우저에서 Promise 기능을 사용하고자 할 때, 폴리필을 통해 해당 기능을 구현하여 호환성을 확보할 수 있다.
> 
> 하지만 브라우저에서 지원하는 방식에 비해 성능이 떨어지고 안정적이지 못하는 단점이 있다.

> 폴리필이 등장한 이유는 브라우저의 명세와 구현이 명확하게 분리되기 때문이다. 웹 표준 인퍼테이스를 통해 브라우저가 지켜야 하는 명세가 존재하고 브라우저는 이를 각자의 방식으로 구현하여 제공한다. 폴리필은 인터페이스에는 정의되나 브라우저에서 구현하지 않나 지원되지 않는 기능을 개발자가 직접 구현하여 사용할 수 있도록 한다.






