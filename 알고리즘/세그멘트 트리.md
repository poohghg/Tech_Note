> 세그멘트 트리는 구간에 대한 정보를 효율적으로 관리하고 질의할 수 있는 자료구조입니다. 주로 배열의 구간 합, 구간 최소값/최대값 등을 빠르게 계산하는 데 사용됩니다. 세그멘트 트리는 이진 트리 형태로 구성되며, 각 노드는 배열의 특정 구간에 대한 정보를 저장한다.  


- 구간 합: arr[l..r]의 합을 빠르게 계산할 수 있습니다.
- 구간 최소값/최대값: arr[l..r]에서 최소값 또는 최대값을 빠르게 찾을 수 있습니다.
- 구간 갱신: 배열의 특정 구간에 대한 값을 빠르게 갱신할 수 있습니다.

### 핵심 아이디어

> 배열의 구간 단위로 분할해서 각 구간의 결과를 트리 형태로 저장한다.

```
배열: [1, 3, 5, 7, 9, 11]

                    [0..5]
                 sum = 36
               /             \
         [0..2]               [3..5]
        sum=9                  sum=27
      /        \            /         \
  [0..1]      [2..2]    [3..4]       [5..5]
   4             5        16            11

```

### 왜 필요한가? (Prefix Sum과 비교)

####  누적합(Prefix Sum)의 한계

| 연산           | 시간     |
| ------------ | ------ |
| 구간 합 쿼리      | O(1)   |
| 값 변경(update) | O(N) ❌ |

`arr[3] = 10; // 이러면 prefix 배열 다시 계산해야 함`

#### 세그멘트 트리

| 연산    | 시간           |
| ----- | ------------ |
| 구간 쿼리 | **O(log N)** |
| 값 변경  | **O(log N)** |

### 대표 패턴

|문제 유형|이유|
|---|---|
|Range Sum Query + Update|누적합 불가|
|Range Min / Max Query|빠른 구간 계산|
|Binary Search + Range Check|체크 비용 감소|
|Sweep Line + 구간 관리|실시간 갱신|