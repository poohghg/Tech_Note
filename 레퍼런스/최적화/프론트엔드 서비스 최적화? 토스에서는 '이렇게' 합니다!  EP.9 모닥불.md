> https://toss.tech/article/firesidechat_frontend_9
> 프론트엔드 서비스 최적화? 토스에서는 '이렇게' 합니다! | EP.9 모닥불


📌 토스에서 프론트엔드 서비스 최적화를 위해 초기 로딩 속도를 개선하는 방법은 무엇인가요?

토스에서는 초기 로딩 속도가 느린 이유를 대역폭, 지연 시간, 자바스크립트 실행 시간 세 가지로 보고, 자바스크립트 번들 사이즈를 줄이거나(쌀 가마니 줄이기), 캐싱 및 프리패칭을 통해 네트워크 지연을 줄이고(쌀 한 톨 미리 옮겨두기), 리액트 네이티브 도입으로 기기 내 로딩을 가능하게 하는 방식으로 최적화를 진행합니다  

## 💡 런타임 성능 최적화를 위한 토스의 노하우는 무엇인가요?

- 불필요한 상태 업데이트를 줄이고, 다른 상태에서 파생되는 값은 계산된 값으로 처리하거나 `useMemo`를 사용합니다.  
    
- 컴포넌트에 `memo`를 적용하여 실제로 변경이 필요한 부분만 재실행되도록 렌더링 범위를 최적화합니다.  
    
- 오래 걸리는 작업은 적당한 단위로 쪼개 비동기적으로 처리하고, 그 사이에 로더나 메시지를 띄워 사용자 체감 성능을 높입니다.  
    

이 영상은 토스의 프론트엔드 개발자들이 **서비스 최적화**에 대한 깊이 있는 통찰과 **실질적인 꿀팁**을 공유하는 내용입니다. 초기 로딩 속도 개선을 위해 **대역폭, 지연 시간, 자바스크립트 실행 시간**을 줄이는 방법과 런타임 성능 향상을 위한 **FPS 측정 및 리렌더링 최적화** 전략을 상세히 다루며, 개발자들이 **사용자 경험**을 최우선으로 고려해야 함을 강조합니다.

  

## 1. 최적화의 의미와 희생

- 최적화를 통해 사용자 시간이나 경험이 개선되면, 그만큼 어떤 것을 희생하는 것임.
- 희생 요소는 메모리, 코드 양, 개발자 시간 등 다양하며, 어떤 것을 우선시할지 결정하는 것이 중요.
- 최적화는 항상 트레이드 오프(상충 관계)가 존재하는 작업임.
## 2. 최적화 시기와 방법

- 성능 최적화는 필요할 때 하는 것이 좋으며, "진짜 해야 된다"는 시점을 프로파일링 후 결정하는 것이 효과적.
    
- "아직 잘 작동하는데, 꼭 해야 하나?"라는 의문이 들 때는 하지 말고, 정말 필요할 때만 진행.
    
- 개발자는 항상 트레이드 오프를 고려하며 최적화를 진행해야 함.
    

## 3. 성능 측정과 테스트 기준

- 평균값이나 중간값보다 **최악의 상황(95등, 99등)**을 기준으로 성능을 테스트하는 것이 중요.
    
- 실제 사용자 환경은 네트워크 상태가 불안정하거나 느릴 때가 많기 때문에, 최악의 경우를 고려해야 함.
    
- 예를 들어, 느린 인터넷 환경에서도 서비스가 원활히 작동하는지 확인하는 것이 핵심.
    

## 4. 최적화의 핵심 요소

- **초기 로딩 속도**와 **런타임 반응성**은 서로 다른 최적화 시점임.
    
- 초기 로딩 속도 개선 방법:
    
    - 대역폭, 지연 시간, 자바스크립트 실행 시간 세 가지 원인 분석.
        
    - 대역폭은 "트럭의 숫자"와 같으며, 번들 크기를 줄이면 로딩 속도 향상.
        
    - 지연 시간은 네트워크 품질에 영향을 받으며, 빠른 네트워크에서는 빠르게, 느리면 느리게 작동.
        
    - 캐싱과 프리패칭으로 네트워크 지연을 최소화하는 전략이 중요.
        
    
- 예시 비유: 냉장고에서 바로 꺼내 먹는 것처럼, 캐싱과 프리패칭으로 빠른 로딩 가능.
    

## 5. 네트워크 환경과 대응 전략

- 빠른 네트워크에서는 미리 데이터를 캐싱하거나 프리패칭으로 빠른 로딩 가능.
    
- 느린 네트워크에서는 데이터를 미리 준비하거나, 일부 데이터를 늦게 불러오는 전략 필요.
    
- 예를 들어, 중요한 번들만 먼저 로드하고, 나머지는 나중에 불러오는 "지연 로딩" 기법 활용.
    

## 6. 쌀 비유를 통한 성능 최적화

- 쌀 가마니(데이터 크기)를 줄이거나, 트럭(네트워크 대역폭)을 늘리거나 하는 방식으로 로딩 속도 개선.
    
- "쌀 한 톨"을 빠르게 이동시키기 위해 캐싱, 프리패칭, 데이터 분할(쪼개기) 전략 사용.
    
- 배달 비유: 필요한 것만 먼저 배달하고, 나중에 덜 중요한 것들을 늦게 배달하는 방식.
    

## 7. 코드 쪼개기와 로딩 전략

- 중요한 리소스는 먼저 로드하고, 덜 중요한 것은 나중에 로드하는 "코드 스플리팅"이 중요.
    
- 잘못 쪼개면 사용자 경험이 어색해질 수 있으니, 적절한 분할이 필요.
    
- 예를 들어, 화면에 바로 보여야 하는 번들은 먼저 불러오고, 나중에 보여지는 번들은 뒤에 불러오는 방식.
    

## 8. 반응성(런타임 성능) 향상 방법

- **체감 성능**은 사용자에게 얼마나 빠르게 반응하는지에 초점.
    
- 노란 막대(프레임) 길이를 줄이거나, 여러 작업을 병렬로 처리하는 방식으로 반응성 향상.
    
- 긴 작업이 있어도, 사용자에게 즉각적인 반응(반응성)이 느껴지도록 설계하는 것이 중요.
    
- 예를 들어, 복잡한 작업을 비동기 처리하거나, 일부 작업을 미리 계산하는 전략.
    

## 9. 성능 측정 도구와 방법

- 크롬 개발자 도구 내 FPS 미터기, 리액트의 리렌더링 횟수 등을 활용.
    
- 프로파일러를 통해 어떤 작업이 성능 저하를 일으키는지 분석.
    
- 드래그 앤 드롭 등 특정 동작 시 프레임이 떨어지면, 원인 분석 후 최적화.
    
- 프로파일러로 메인 스레드의 자바스크립트 실행 여부, 렌더링 범위 등을 체크.
    

## 10. 성능 최적화의 실제 사례와 전략

- 수천, 수만 개 요소 복사/붙여넣기 작업은 비동기 처리와 청킹(작은 단위로 나누기)로 해결.
    
- 컴포넌트 렌더링 최적화:
    
    - 불필요한 리렌더링 방지 위해 메모이제이션 활용.
        
    - 변경이 필요한 부분만 업데이트하도록 설계.
        
    
- 상태 관리 최적화:
    
    - 파생 상태는 하나의 상태로 통합하거나, 계산된 값으로 대체.
        
    - 여러 상태 업데이트를 연쇄적으로 하지 않도록 설계.
        
    

## 11. 결론과 마무리

- 서비스 성능 향상은 초기 로딩 속도와 런타임 성능 두 가지를 모두 고려해야 함.
    
- 최적화는 트레이드 오프와 우선순위 결정이 핵심.
    
- 사용자 환경(네트워크 상태 등)을 고려한 테스트와 전략이 중요.
    
- 개발자는 프로파일링과 적절한 분할, 캐싱, 비동기 처리 등을 통해 성능을 높일 수 있음.
    
- 앞으로도 더 많은 노하우와 전략을 공유하며, 사용자 경험을 개선하는 것이 목표임.
    

  
