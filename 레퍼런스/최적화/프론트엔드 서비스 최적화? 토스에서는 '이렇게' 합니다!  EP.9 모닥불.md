> https://toss.tech/article/firesidechat_frontend_9
> 프론트엔드 서비스 최적화? 토스에서는 '이렇게' 합니다! | EP.9 모닥불

  
## 📌 토스에서 프론트엔드 서비스 최적화를 위해 초기 로딩 속도를 개선하는 방법은 무엇인가요?

토스에서는 초기 로딩 속도가 느린 세 가지 주요 원인인 대역폭, 지연 시간, 자바스크립트 실행 시간을 개선하기 위해 자바스크립트 번들 사이즈를 줄이고, 캐싱 및 프리패칭을 활용하며, 리액트 네이티브와 같은 기술을 도입하여 네트워크 의존도를 낮추는 전략을 사용합니다  

## 💡 런타임 성능 최적화를 위한 토스의 노하우는 무엇인가요?

- 불필요한 상태 업데이트를 줄이고, 상태 파생 시 계산된 값을 사용하거나 `useMemo`를 활용합니다  
- 컴포넌트에 `memo`를 적용하여 불필요한 리렌더링을 방지하고, 실제 변경이 필요한 부분만 업데이트되도록 합니다  
- 프로파일러를 활용하여 메인 스레드를 블록하는 자바스크립트 코드를 식별하고, 작업을 청킹하여 비동기적으로 처리하며 사용자에게 반응성을 높이는 피드백을 제공합니다      

이 영상에서는 **프론트엔드 서비스 최적화**에 대한 통찰력을 제공합니다. 토스의 박서진, 유석, 권영 세 명의 프론트엔드 개발자들이 느린 서비스 문제를 해결하기 위해 어떤 전략과 노력을 기울이는지를 이야기합니다. 통신 속도와 코드 최적화의 중요성을 강조하며, 초기 로딩 속도와 런타임 성능의 차이를 명확히 구분합니다. 이 과정에서 **트레이드오프**의 필요성과 성능 개선을 위한 다양한 팁도 전달합니다. 사용자 경험을 최우선으로 고려하며 최적화에 대한 멘탈리티를 배우고 싶다면 이 영상을 꼭 시청해 보시길 바랍니다.

## 1. 🔍 최적화의 트레이드오프와 성능 평가의 중요성

![captureSource](https://resource-release.s3.ap-northeast-2.amazonaws.com/thumbnails/upUON56UEYo/0.jpg)

- **최적화**를 통해 **유저의 시간**을 줄이는 것은 결국 **다른 요소의 희생**을 의미한다 .
- 초기 로딩 속도가 느린 이유는 여러 가지가 있으며, 이를 해결하기 위해 **사용자의 빠른 입력을 빠르게 처리**해야 한다 .
- 최적화는 항상 적절한 **시점을 판단하는 것**이 중요하며, 이를 위해서는 ==**프로파일링과 측정**==을 먼저 실시하는 것이 필요하다 .
- 최적화의 필요 시점을 잘못 판단하면 실질적인 성능개선을 이끌어낼 수 없으며, **좋은 환경에서만 테스트하지 않고 최악의 상황 기준**으로 테스트해야한다.
- 최적화는 성능 개선을 위한 **트레이드오프**의 일종이고, 그 **희생의 요소**는 메모리, 코드 양, 개발자의 시간 등 다양하다 .

## 2. 🚀 프론트엔드 최적화: 초기 로딩 속도의 중요성

![captureSource](https://resource-release.s3.ap-northeast-2.amazonaws.com/thumbnails/upUON56UEYo/249.jpg)

- 초기 로딩 속도는 프론트엔드 최적화에서 중요한 두 가지 측면 중 하나로, 다른 하나는 런타임 반응성이다 .
- 초기 로딩 속도가 느린 이유로는 **대역폭**, **지연 시간**, **자바스크립트 실행 시간**이 제시된다 .
	- 대역폭의 경우 자바스크립트 번들 파일이 작고 적을수록 로동 속도가 빨리진다.
	- 
- 대역폭은 데이터 전송의 속도를 대변하며, 더 많은 트럭이 있을수록 더 많은 데이터를 빠르게 전송할 수 있다는 비유로 설명된다 .
- 쌀 가마니를 줄이거나 트럭을 늘리는 것으로 로딩 속도를 개선할 수 있으며, 이로 인해 데이터 전송 효율이 증가한다 .
- 지연 시간은 네트워크 품질에 영향을 받으며, 좋은 인터넷 환경에서는 데이터 전송이 **신속하게** 이루어지지만, 불량 인터넷 환경에서는 느리게 진행된다 .

## 3. 🍚 프론트엔드 서비스 최적화를 위한 캐싱 전략

![captureSource](https://resource-release.s3.ap-northeast-2.amazonaws.com/thumbnails/upUON56UEYo/400.jpg)

- **캐싱**은 데이터 요청을 줄이기 위해 자주 사용하는 요소를 미리 저장하는 전략이다. 이를 통해 로딩 속도를 빠르게 할 수 있다 .
    
- 새로운 기술인 **리액트 네이티브**를 도입하는 이유는 데이터를 네트워크가 아닌 기계에서 직접 로딩함으로써 접근성을 향상시키기 위함이다 .
    
- 데이터를 캐싱할 때, **사용자 요청**에 따라 우선순위 있게 데이터를 가져오는 것이 중요하다. 예를 들어, 배고픈 사람 10명과 덜 배고픈 사람 90명의 상황을 비유로 들 수 있다 .
    
- 로딩할 리소스의 **쪼개기** 전략이 적절하지 않으면 사용자 경험이 저하될 수 있다. 개발자는 이를 잘 조절해야 한다 .
    
- 최적화가 필요한 요소를 결정하는 것은 매우 중요하다. 사용자가 필요로 하지 않는 요소는 미리 저장하지 않아도 좋음으로 전략을 세워야 한다 .
    

  

## 4. ⚙️ 런타임 성능 최적화와 사용자 경험 향상

![captureSource](https://resource-release.s3.ap-northeast-2.amazonaws.com/thumbnails/upUON56UEYo/582.jpg)

- 초기 로딩 속도뿐만 아니라 앱의 **반응성**과 성능이 중요한 요소로 강조되며, 이러한 성능은 사용자 경험에 큰 영향을 미친다 .
    
- 데우스 프로젝트는 토스에서 개발 중인 **디자인 편집기**로, 고속 반응성을 요구하며 이를 통해 사용자가 느끼는 지연을 최소화해야 한다 .
    
- 런타임 성능 최적화를 위해 **프레임 퍼 세컨드(FPS)**와 리렌더링 횟수를 점검하는 것이 중요하며, 이를 위한 다양한 도구들이 소개된다 .
    
- FPS 측정을 위해 **프로파일러** 도구를 활용하여 성능 저하의 원인을 분석하고, 주로 메인 스레드를 블락하는 JS 코드가 문제임을 인식할 수 있다 .
    
- 런타임 성능은 **실제 성능**과 **체감 성능**으로 나눌 수 있으며, 체감 성능은 사용자에게 느껴지는 반응성을 의미한다 .
    
- 성능 최적화를 위해서는 불필요한 상태 업데이트를 줄이고, 상태를 효과적으로 관리하는 것이 핵심이며, 특히 **메모이제이션** 기법을 통해 리렌더링 성능을 개선할 수 있다 .
    

### 4.1. 런타임 성능과 사용자 경험의 중요성

- 초기 로딩 속도뿐만 아니라, 앱이 로딩된 후의 반응성과 빠른 동작 속도도 중요하다는 점이 강조된다 .
    
- 현재 진행 중인 데우스 프로젝트는 **런타임 성능**에 많은 신경을 써야 하는 제품으로 설명된다 .
    
- 데우스 프로젝트는 **디자인 편집기**로서, 피그마나 프레이어와 유사한 역할을 하는 도구라고 소개된다 .
    
- 이 편집기는 디자이너들이 매일 사용하는 도구로, 빠른 입력을 효율적으로 처리하여 사용자에게 느림의 인상을 주지 않도록 설계되어야 한다 .
    
- 빠릿한 경험을 제공하기 위해서는 전체 로딩 후의 사용자 경험에서 속도가 느껴져야 한다는 점이 강조된다 .
    

### 4.2. ️ 로딩 성능 최적화 도구 및 방법

- 초기 로딩 성능을 측정하기 위해 **라이트하우스** 지표와 같은 다양한 도구들이 활용된다 .
    
- 런타임 성능 측정 시 **프레임 퍼 세컨드(FPS)**와 상태 변화 시 렌더링 횟수를 확인하는 것이 중요하다 .
    
- **FPS 측정 도구**로는 크롬 개발자 도구의 내장 FPS 미터기가 있지만, 실제 FPS보다 상대적으로 후한 값이 나올 수 있다 .
    
- 개발 중에는 애플리케이션 내부에 **자체 FPS 미터기**를 구현하고, 드래그 앤 드랍 기능이 60fps를 유지하는지 체크하는 것이 효과적이다 .
    
- 최적화의 첫 단계는 **원인 분석**이며, 이를 위해 프로파일러를 사용해 메인 스레드를 차단하는 자바스크립트 코드를 찾아내는 것이 필요하다 .
    

### 4.3. 런타임 성능의 두 가지 유형 및 체감 성능 개선 방법

- **체감 성능**은 사용자가 느끼는 반응성을 의미하며, **실제 성능**은 작업의 시작부터 끝까지 걸리는 시간을 나타낸다.  
    
- 실제 성능을 높이는 방법은 작업 시간 단축이지만, 체감 성능은 작업 사이에 다른 작업을 처리함으로써 개선할 수 있다.  
    
- 반응성이 좋으면 실제 동작 시간이 길어도 사용자에게는 성능이 좋게 느껴질 수 있다.  
    
- 복사 붙여넣기 작업에서는 스레드를 차단하지 않고 적절한 단위로 처리하여 반응성을 높이는 전략을 사용한다.  
    
- 리액트의 렌더링 최적화도 반응성을 향상시키는 중요한 요소이다.  
    

### 

4.4. ️ 리액트 최적화 노하우

- **불필요한 상태 업데이트**는 리액트에서 성능 저하를 초래하므로, 상태 간의 의존성을 줄이는 것이 최적화의 핵심이다 .
    
- 상태가 복잡하게 연결되어 있을 경우, **계산된 값**을 사용하거나 필요한 경우에만 상태 업데이트를 시도하는 것이 효과적이다 .
    
- 토스 PC에서는 컴포넌트의 다양한 조합이 렌더링 성능에 영향을 미치므로, **메모이제이션**을 통해 최적화를 진행하였다 .
    
- 전체 페이지 리렌더링 대신, 유저의 특정 인터랙션에 반응하여 **필요한 부분만 업데이트**되도록 최적화하는 방식이 중요하다 .
    
- 상태 변경 간 **비동기성**으로 인해 발생할 수 있는 성능 부하를 해결하기 위해 가능한 커밋 횟수를 줄이는 것이 필요하다 .
    

  

## 5. 🔍 서비스 최적화 논의의 마무리

![captureSource](https://resource-release.s3.ap-northeast-2.amazonaws.com/thumbnails/upUON56UEYo/1144.jpg)

- 서비스 최적화를 논할 때는 **초기 로딩 속도**와 **런타임 성능** 두 가지를 분리해서 고려해야 한다.  
    
- 여러 사람과의 대화는 평소에 생각하지 못했던 부분을 떠오르게 하여 **즐거운 경험**이 된다.  
    
- 오늘의 촬영에서는 이야기하고 싶은 내용 중 약 10%를 전달하지 못한 것으로 보이며, 추가적인 기회를 통해 더 많은 이야기를 나누고 싶어 한다.  
    
- 토스 커뮤니티는 활발한 대화가 이루어지며, 회원들이 이에 참여하면 전체적인 대화 경험이 풍부해진다.  
    
- 향후 모닥불에서 더 재미있는 내용으로 깊이 있는 논의를 이어나갈 계획이다.