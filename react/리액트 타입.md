###  ë¦¬ì•¡íŠ¸ íƒ€ì… ì •ë¦¬: ComponentType vs ReactElement 

| íƒ€ì…                     | ì˜ë¯¸                        | ì–¸ì œ ì“°ëŠ”ì§€                      |
| ---------------------- | ------------------------- | --------------------------- |
| **`ComponentType<P>`** | **ì»´í¬ë„ŒíŠ¸ ì •ì˜** (í•¨ìˆ˜í˜• or í´ë˜ìŠ¤í˜•) | HOC, ì»´í¬ë„ŒíŠ¸ ì£¼ì…, ë™ì  ì»´í¬ë„ŒíŠ¸       |
| **`ReactElement<P>`**  | **ë Œë”ë§ëœ ê²°ê³¼ë¬¼(JSX)**         | JSXì˜ ë°˜í™˜ íƒ€ì…, ì‹¤ì œ DOMì— ë“¤ì–´ê°€ëŠ” ê°ì²´ |

#### ê°œë… ìš”ì•½ í‘œ

| íƒ€ì…                                                     | ì˜ë¯¸                         | ëŒ€í‘œ ì‚¬ìš©ì²˜                                           | í•µì‹¬ í¬ì¸íŠ¸                                               |
| ------------------------------------------------------ | -------------------------- | ------------------------------------------------ | ---------------------------------------------------- |
| ComponentType<P>                                       | ì»´í¬ë„ŒíŠ¸(í•¨ìˆ˜í˜• ë˜ëŠ” í´ë˜ìŠ¤í˜•)ë¥¼ ë‚˜íƒ€ë‚´ëŠ” íƒ€ì… | HOCì˜ ì¸ì/ë°˜í™˜, ì»´í¬ë„ŒíŠ¸ ì£¼ì…(DI), ë™ì  ì»´í¬ë„ŒíŠ¸                 | ì‚¬ìš©ì ì •ì˜ ì»´í¬ë„ŒíŠ¸ë§Œ. â€˜divâ€™ ê°™ì€ íƒœê·¸ëŠ” í¬í•¨ ì•ˆ ë¨                    |
| ElementType                                            | JSXì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” â€œìš”ì†Œ íƒ€ì…â€     | ë™ì ìœ¼ë¡œ íƒœê·¸ ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ ì„ íƒ                               | 'div' ê°™ì€ intrinsic ìš”ì†Œ + ì‚¬ìš©ì ì»´í¬ë„ŒíŠ¸ ëª¨ë‘ í¬í•¨               |
| ReactElement<P, T>                                     | ë Œë”ë§ëœ ê²°ê³¼ë¬¼(ê°€ìƒ DOM ë…¸ë“œ)        | JSX ë°˜í™˜ íƒ€ì…(ì‹¤ì œë¡œëŠ” JSX.Element), children ì œí•œì´ í•„ìš”í•œ ê²½ìš° | êµ¬ì²´ì ì¸ ì—˜ë¦¬ë¨¼íŠ¸ í•œ ê°œë¥¼ í‘œí˜„                                    |
| JSX.Element                                            | JSXê°€ ë°˜í™˜í•˜ëŠ” í‘œì¤€ íƒ€ì…            | ì»´í¬ë„ŒíŠ¸ì˜ ë°˜í™˜ íƒ€ì… ì£¼ì„                                   | ì‹¤ë¬´ì—ì„  ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ JSX.Elementë¥¼ ê°€ì¥ í”íˆ ì‚¬ìš©                   |
| ReactNode                                              | ë Œë”ë§ ê°€ëŠ¥í•œ ëª¨ë“  ê°’ì˜ í•©ì§‘í•©          | children íƒ€ì…                                      | string, number, ReactElement, Fragment, Portal, ë°°ì—´ ë“± |
| ReactPortal                                            | Portal ê²°ê³¼ë¬¼                 | Portal ê´€ë ¨ API                                    | ReactNodeì— í¬í•¨ë˜ì§€ë§Œ ë³„ë„ ì‹ë³„ ê°€ëŠ¥                            |
| PropsWithChildren<P>                                   | Pì— children ì¶”ê°€             | children ë°›ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ Props ì •ì˜                       | children ì˜µì…”ë„ í¬í•¨                                      |
| PropsWithoutRef<P>Â / PropsWithRef<P>                   | ref í¬í•¨/ì œê±°                  | forwardRef, ì™¸ë¶€ ë˜í•‘ ì‹œ                              | Refê°€ ì„ì¼ ë•Œ ì•ˆì „í•œ Props ìœ í‹¸                               |
| ComponentProps<T>                                      | ì»´í¬ë„ŒíŠ¸/íƒœê·¸ì˜ Props ì¶”ë¡           | ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë˜í¼, ì»´í¬ë„ŒíŠ¸ ì£¼ì…, ìŠ¤íƒ€ì¼ ë˜í•‘                      | typeof Button ë˜ëŠ” 'a' ê°™ì€ ë¬¸ìì—´ë„ ê°€ëŠ¥                      |
| ComponentPropsWithoutRef<T>Â / ComponentPropsWithRef<T> | ref ìœ ë¬´ê¹Œì§€ ê³ ë ¤í•œ Props ì¶”ë¡       | forwardRef ì¡°í•©                                    | DOM ì»´í¬ë„ŒíŠ¸/í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ì°¨ì´ ëŒ€ì‘                              |
| ComponentRef<T>                                        | íŠ¹ì • ì»´í¬ë„ŒíŠ¸ì˜ ref ëŒ€ìƒ íƒ€ì…         | useRef, forwardRefì˜ íƒ€ì…                           | DOM ìš”ì†Œë‚˜ ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… ì¶”ë¡                               |
| ForwardRefExoticComponent<P>                           | forwardRefë¡œ ë§Œë“  ì»´í¬ë„ŒíŠ¸ íƒ€ì…     | forwardRef ê²°ê³¼ íƒ€ì…                                 | ref propì„ Exoticí•˜ê²Œ ë‹¤ë£¸                                |
| MemoExoticComponent<C>                                 | React.memo ê²°ê³¼ íƒ€ì…           | ë©”ëª¨ì´ì œì´ì…˜ëœ ì»´í¬ë„ŒíŠ¸                                     | .type ë“±ìœ¼ë¡œ ì›í˜• ì ‘ê·¼ ê°€ëŠ¥                                   |
| LazyExoticComponent<C>                                 | React.lazy ê²°ê³¼ íƒ€ì…           | ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…                                          | Suspenseì™€ í•¨ê»˜ ì‚¬ìš©                                      |
| ExoticComponent<P>                                     | Exotic ì»´í¬ë„ŒíŠ¸ì˜ ê³µí†µ ê¸°ë°˜         | ë‚´ë¶€ ìœ í‹¸/ê³ ê¸‰ íŒ¨í„´                                      | ë©”ëª¨/ë ˆì´ì§€/í”„ë¡œë°”ì´ë” ë“±                                       |

ìì£¼ ì“°ëŠ” êµ¬ë¶„ í¬ì¸íŠ¸

- ComponentType vs ElementType
    - `ComponentType<P>`: ì‚¬ìš©ì ì •ì˜ ì»´í¬ë„ŒíŠ¸ë§Œ í—ˆìš©. íƒœê·¸ ë¬¸ìì—´('div')ëŠ” ì•ˆ ë¨.
- ElementType: íƒœê·¸ ë¬¸ìì—´ê³¼ ì‚¬ìš©ì ì»´í¬ë„ŒíŠ¸ ëª¨ë‘ í—ˆìš©. â€œë™ì  íƒœê·¸/ì»´í¬ë„ŒíŠ¸ ì„ íƒâ€ì— ìµœì .
- ReactElement vs JSX.Element vs ReactNode
    - JSX.Element: ì»´í¬ë„ŒíŠ¸ê°€ JSXë¥¼ ë°˜í™˜í•  ë•Œì˜ í‘œì¤€ ë°˜í™˜ íƒ€ì….
    - ReactElement: íŠ¹ì • ì—˜ë¦¬ë¨¼íŠ¸ í•œ ê°œë¥¼ í‘œí˜„í•˜ëŠ” íƒ€ì…(ì œë„¤ë¦­ìœ¼ë¡œ props/íƒ€ì…í˜‘ì•½ ê°€ëŠ¥).
    - ReactNode: ë Œë”ë§ ê°€ëŠ¥í•œ ëª¨ë“  ê²ƒ(childrenì— ê°€ì¥ ì í•©).

ì‹¤ì „ ì˜ˆì œ

1. HOC: ì»´í¬ë„ŒíŠ¸ë¥¼ ì¸ìë¡œ ë°›ê³  ê°™ì€ Propsë¥¼ ê°€ì§„ ìƒˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜

``` tsx
import React, { ComponentType } from 'react';

function withLoading<P>(Wrapped: ComponentType<P>) {
  return function WithLoading(props: P & { loading?: boolean }) {
    if (props.loading) return <div>Loading...</div>;
    const { loading, ...rest } = props as any;
    return <Wrapped {...(rest as P)} />;
  };
}
```

- ë™ì  ì»´í¬ë„ŒíŠ¸ ë Œë”ë§

``` tsx
import React, { ComponentType } from "react";

interface AlertProps { message: string }
const InfoAlert = ({ message }: AlertProps) => <div style={{ color: "blue" }}>{message}</div>;
const WarningAlert = ({ message }: AlertProps) => <div style={{ color: "orange" }}>{message}</div>;
const ErrorAlert = ({ message }: AlertProps) => <div style={{ color: "red" }}>{message}</div>;

// alertTypeì— ë”°ë¼ ë™ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„ íƒ
const alertsMap: Record<string, ComponentType<AlertProps>> = {
  info: InfoAlert,
  warning: WarningAlert,
  error: ErrorAlert,
};

interface DynamicAlertProps {
  type: "info" | "warning" | "error";
  message: string;
}

const DynamicAlert = ({ type, message }: DynamicAlertProps) => {
  const AlertComponent = alertsMap[type]; // ë™ì  ì„ íƒ
  return <AlertComponent message={message} />;
};

// ì‚¬ìš©
const App = () => (
  <>
    <DynamicAlert type="info" message="Info!" />
    <DynamicAlert type="warning" message="Watch out!" />
    <DynamicAlert type="error" message="Something went wrong!" />
  </>
);

```

2. ë™ì  ì»´í¬ë„ŒíŠ¸/íƒœê·¸ ì„ íƒ: ElementType ì‚¬ìš©

``` tsx
import React, { ElementType } from 'react';

type PolymorphicProps<E extends ElementType> = {
  as?: E;
  children?: React.ReactNode;
} & Omit<React.ComponentProps<E>, 'as' | 'children'>;

function Box<E extends ElementType = 'div'>({ as, children, ...rest }: PolymorphicProps<E>) {
  const Tag = as ?? 'div';
  return <Tag {...rest}>{children}</Tag>;
}

// ì‚¬ìš©
<Box as="a" href="/docs">ë§í¬</Box>
<Box as={MyButton} variant="primary">ë²„íŠ¼</Box>
```

3. ì»´í¬ë„ŒíŠ¸ ì£¼ì…(Dependency Injection): ComponentTypeê³¼ ComponentProps

``` tsx
import React, { ComponentType, ComponentProps } from 'react';

type InjectProps<C extends ComponentType<any>> = {
  Component: C;
  componentProps: ComponentProps<C>;
};

function Injector<C extends ComponentType<any>>({ Component, componentProps }: InjectProps<C>) {
  return <Component {...componentProps} />;
}

// ì‚¬ìš©
function PrimaryButton(props: { onClick: () => void; children: React.ReactNode }) {
  return <button className="primary" {...props} />;
}

<Injector Component={PrimaryButton} componentProps={{ onClick: () => {}, children: 'í™•ì¸' }} />
```

4. children íƒ€ì…ì€ ReactNodeê°€ ì •ì„


``` tsx
type CardProps = React.PropsWithChildren<{
  title: string;
}>;

function Card({ title, children }: CardProps) {
  return (
    <section>
      <h2>{title}</h2>
      {children}
    </section>
  );
}
```

5. JSX ë°˜í™˜ íƒ€ì… í‘œê¸°: JSX.Element (ê°€ì¥ í”í•¨)


``` tsx
function Hello(): JSX.Element {
  return <div>Hello</div>;
}
```

6. íŠ¹ì • ì—˜ë¦¬ë¨¼íŠ¸ í•œ ê°œë¥¼ ì¸ìë¡œ ë°›ì„ ë•Œ: ReactElement


``` tsx
import { ReactElement } from 'react';

function OnlyOneChild({ child }: { child: ReactElement }) {
  // childëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ìœ íš¨í•œ React ì—˜ë¦¬ë¨¼íŠ¸
  return <div className="only-one">{child}</div>;
}
```

7. DOM/ì»´í¬ë„ŒíŠ¸ Props ì¶”ë¡ : ComponentProps/ComponentPropsWithoutRef/WithRef


``` tsx
type AnchorProps = React.ComponentProps<'a'>; // HTMLAnchorElementì— í•´ë‹¹í•˜ëŠ” props
type ButtonPropsNoRef = React.ComponentPropsWithoutRef<'button'>;

function LinkLike(props: AnchorProps) { /* ... */ return <a {...props} /> }
```

8. ref íƒ€ì… ì•ˆì „í•˜ê²Œ: forwardRef + ComponentRef


``` tsx
import React, { forwardRef } from 'react';

type InputProps = React.ComponentPropsWithoutRef<'input'>;

const TextInput = forwardRef<HTMLInputElement, InputProps>(function TextInput(props, ref) {
  return <input ref={ref} {...props} />;
});

// ì‚¬ìš©
const ref = React.createRef<React.ComponentRef<typeof TextInput>>(); // HTMLInputElement
<TextInput ref={ref} />
```

9. memo / lazyì˜ íƒ€ì…


``` tsx
const Memoized = React.memo(MyComponent); // MemoExoticComponent<typeof MyComponent>
const LazyComp = React.lazy(() => import('./MyComponent')); // LazyExoticComponent<...>
```

10. Portal íƒ€ì…


``` tsx
import { createPortal } from 'react-dom';
import type { ReactPortal } from 'react';

function renderToBody(node: React.ReactNode): ReactPortal {
  return createPortal(node, document.body);
}
```

ì–¸ì œ ì–´ë–¤ íƒ€ì…ì„ ì“°ë‚˜ ìš”ì•½

- ì»´í¬ë„ŒíŠ¸ ê·¸ ìì²´ë¥¼ ë‹¤ë£° ë•Œ: `ComponentType<P>`Â (HOC, ì»´í¬ë„ŒíŠ¸ ì£¼ì…)
- íƒœê·¸/ì»´í¬ë„ŒíŠ¸ë¥¼ ëª¨ë‘ ìœ ì—°í•˜ê²Œ ë°›ì„ ë•Œ: ElementType
- JSX ë°˜í™˜ íƒ€ì…ì„ ì§€ì •í•  ë•Œ: JSX.Element
- childrenì²˜ëŸ¼ â€œë Œë”ë§ ê°€ëŠ¥í•œ ëª¨ë“  ê²ƒâ€ì„ ë°›ì„ ë•Œ: ReactNode
- â€œì—˜ë¦¬ë¨¼íŠ¸ í•œ ê°œâ€ë§Œ ë°›ì„ ë•Œ: ReactElement
- DOM/ì»´í¬ë„ŒíŠ¸ì˜ Propsë¥¼ ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ: ComponentProps/ComponentPropsWithoutRef/WithRef
- refë¥¼ ì•ˆì „í•˜ê²Œ ì „ë‹¬/íƒ€ì´í•‘í•  ë•Œ: forwardRef + ComponentRef/PropsWithRef
- ì„±ëŠ¥ ìµœì í™”/ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ê²°ê³¼ íƒ€ì…: MemoExoticComponent, LazyExoticComponent

ìì£¼ í•˜ëŠ” ì˜¤í•´/ì£¼ì˜

- `FC<Props>`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ childrenì„ í¬í•¨ì‹œì¼œ ì£¼ì§€ë§Œ, ìµœê·¼ì—ëŠ” ëª…ì‹œì ìœ¼ë¡œ PropsWithChildrenë¥¼ ì“°ëŠ” ê²ƒì´ ì˜ë„ê°€ ë” ëª…í™•í•©ë‹ˆë‹¤. ë˜í•œ FCëŠ” defaultProps ê´€ë ¨ ì œì•½ ë“±ìœ¼ë¡œ ì„ í˜¸ë„ê°€ ë‚®ì•„ì¡ŒìŠµë‹ˆë‹¤.
- ComponentType vs ElementTypeë¥¼ í˜¼ë™í•˜ì§€ ì•Šê¸°: íƒœê·¸ ë¬¸ìì—´ì„ ë°›ìœ¼ë ¤ë©´ ElementTypeì„ ì‚¬ìš©í•˜ì„¸ìš”.
- children íƒ€ì…ì„ ReactElementë¡œ ì¢í˜€ë²„ë¦¬ë©´ string/number/Fragment ë“± ìœ íš¨í•œ JSXê°€ ë§‰í™ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ReactNodeê°€ ì •ë‹µì…ë‹ˆë‹¤.
- ë°˜í™˜ íƒ€ì…ì€ ëŒ€ë¶€ë¶„ JSX.Elementë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤. ReactElementë¥¼ ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ ê°•ì œí•  í•„ìš”ëŠ” ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.

### ì»´í¬ë„ŒíŠ¸ íƒ€ì… ê³„ì¸µ

``` 
any
 â””â”€ ReactNode
      â”œâ”€ ReactChild
      â”‚    â”œâ”€ ReactElement
      â”‚    â””â”€ string | number
      â”œâ”€ ReactFragment
      â”œâ”€ ReactPortal
      â””â”€ boolean | null | undefined

```

### #**`ReactNode`**

- ê°€ì¥ ë²”ìš©ì ì¸ íƒ€ì….
- **ë Œë”ë§ ê°€ëŠ¥í•œ ëª¨ë“  ê²ƒ**ì„ ì˜ë¯¸.
- í¬í•¨í•˜ëŠ” ê²ƒ:
    - JSX (`<div />`, `<MyComp />`)
    - ë¬¸ìì—´/ìˆ«ì (`"hello"`, `42`)
    - ë°°ì—´(`ReactNode[]`)
    - `null`, `undefined`, `false` (ë Œë”ë§ë˜ì§€ ì•ŠìŒ)
- ì˜ˆì‹œ:

``` tsx
const node: React.ReactNode = (
  <>
    Hello
    <span>World</span>
    {false}
    {null}
    {["Array", <strong>of</strong>, "nodes"]}
  </>
);

```

---

### **`ReactChild`**

- `ReactNode`ì˜ í•˜ìœ„ íƒ€ì….
- ë‹¨ì¼ ë Œë”ë§ ê°€ëŠ¥í•œ ìš”ì†Œ:
    - ë¬¸ìì—´/ìˆ«ì
    - `ReactElement```
### **`ReactElement<P>`**

- JSX/ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œ ê²°ê³¼ë¬¼.
- ì œë„¤ë¦­ `P`ëŠ” **props íƒ€ì…**.
    

``` tsx

const elem: React.ReactElement<{ name: string }> = <MyComp name="John" />;

```

- íŠ¹ì§•:
    - `type` (ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜/í´ë˜ìŠ¤)
    - `props` (ì»´í¬ë„ŒíŠ¸ props)
    - `key` ë“±
---

### **`ReactFragment`**

- ë°°ì—´/ì¡°í•© ë Œë”ë§ìš© íƒ€ì… (`<>...</>`).
    
- JSXì—ì„œ `<></>`ê°€ ë°˜í™˜í•˜ëŠ” íƒ€ì….
    

`const frag: React.ReactFragment = (   <>     <div>1</div>     <div>2</div>   </> );`

---

### **`ReactPortal`**

- ReactDOM.createPortalë¡œ ìƒì„±ë˜ëŠ” í¬í„¸.
    
- ì˜ˆ: ëª¨ë‹¬ì„ ë‹¤ë¥¸ DOM ë£¨íŠ¸ì— ë Œë”ë§í•  ë•Œ ì‚¬ìš©.
    

`const portal: React.ReactPortal = ReactDOM.createPortal(   <div>Modal</div>,   document.body );`

---

### **boolean | null | undefined**

- ë Œë”ë§í•˜ì§€ ì•Šì„ ë•Œ í—ˆìš©.
    

`const maybe: React.ReactNode = condition ? <div>Show</div> : null;`

---

## 3ï¸âƒ£ ìš”ì•½

|íƒ€ì…|ì˜ë¯¸|í¬í•¨ ì˜ˆì‹œ|
|---|---|---|
|`ReactNode`|ëª¨ë“  ë Œë”ë§ ê°€ëŠ¥í•œ ê²ƒ|string, number, JSX, fragment, portal, null, boolean, array|
|`ReactChild`|ë‹¨ì¼ ë Œë”ë§ ê°€ëŠ¥í•œ ìš”ì†Œ|string, number, JSX|
|`ReactElement<P>`|ì»´í¬ë„ŒíŠ¸/JSX ê²°ê³¼|`<MyComp name="x" />`|
|`ReactFragment`|ë°°ì—´/ì¡°í•©|`<>...</>`|
|`ReactPortal`|í¬í„¸ ë Œë”ë§|`createPortal(<div />, root)`|

---

ğŸ’¡ í•µì‹¬ íŒ:

- **`children` íƒ€ì…**ì—ëŠ” ë³´í†µ `ReactNode`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    
- **HOC ë°˜í™˜ íƒ€ì…**ì´ë‚˜ â€œì»´í¬ë„ŒíŠ¸ ì£¼ì…â€ì—ëŠ” `ComponentType<P>`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    
- **JSX ê²°ê³¼ë¥¼ ì €ì¥/ì¡°ì‘**í•  ë•ŒëŠ” `ReactElement<P>`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.