> 참조
> 
> https://wikidocs.net/156323

브라우저는 js 코드를 실행하는 것 외에도, 다양한 작업(테스크)을 처리한다. 화면을 렌더링하고, dom의 이벤트를 관리하고, callback 과 promise를 적절한 시점에 실행되도록 하는 일 등은 전부 브라우저과 관리한다. 이런 작업을 테스트라고 하며, 테스크들은 순서대로 테스크 큐에 담겨서 실핸된다.

### Task란?

태스크는 이벤트나 콜백 등의 작업을 수행하는 알고리즘을 담은 객체이다. 태스크는 이벤트나 파싱, 콜백 등을 담당하는 작업의 한 단위이다. 태스크는 태스크 큐에서 오래된 순으로 선택되어 실행되므로, 태스크가 생겨나는 것은 태스크 큐에 적재(enqueue) 된다는 것이다. 태스트가 큐에 담기는 경우는 아래와 같다.
1. 새로운 js 프로그램이 `<script>` 요소나 콘솔 등에서 실행되는 경우
2. 이벤트가 발생하여 이벤트의 콜백 함수가 태스크 큐에 적재되는 경우
3. `setTimeout`이나 `setInterval` 등의 타이머 함수가 실행되어 태스크 큐에 적재되는 경우`


> The steps to prepare to run script with an [environment settings object](https://html.spec.whatwg.org/#environment-settings-object) settings are as follows:
> 
> 1. Push settings's [realm execution context](https://html.spec.whatwg.org/#realm-execution-context) onto the [JavaScript execution context stack](https://tc39.es/ecma262/#execution-context-stack); it is now the [running JavaScript execution context](https://tc39.es/ecma262/#running-execution-context).
> 
> To prepare to run a callback with an [environment settings object](https://html.spec.whatwg.org/#environment-settings-object)settings:
> 
> 2. Push settings onto the [backup incumbent settings object stack](https://html.spec.whatwg.org/#backup-incumbent-settings-object-stack).
> 3. Let context be the [topmost script-having execution context](https://html.spec.whatwg.org/#topmost-script-having-execution-context).
> 
> 8.1.5.3.1 HostCallJobCallback(callback, V, argumentsList)
> 
> If script execution context is not null, then [push](https://infra.spec.whatwg.org/#stack-push) script execution context onto the [JavaScript execution context stack](https://tc39.es/ecma262/#execution-context-stack).

- 명세의 내용
1. 스크립트를 실행할 준비를 하기 위한 단계는 다음과 같다.
2. 설정의 realm 실행 컨텍스트를 JavaScript 실행 컨텍스트 스택에 푸시한다. 이제 실행중인 JavaScript 실행 컨텍스트가 된다.
3. 환경 설정 객체 settings로 콜백을 실행할 준비를 하기 위한 단계는 다음과 같다.
4. 설정을 백업 임원 설정 객체 스택에 푸시한다.
5. context를 최상위 스크립트 실행 컨텍스트로 한다.
6. 만약 스크립트 실행 컨텍스트가 null이 아니라면, 스크립트 실행 컨텍스트를 JavaScript 실행 컨텍스트 스택에 푸시한다.

브라우저가 담당하는 태스크들을 서로 다른 간격으로 실행되어야 한다. 예를 들어,JS를 실행하는 태스크는 가능한 한 쉼없이 실행해야 하지만, 브라우저 렌더링은 초당 60번 정도면 충분하다.